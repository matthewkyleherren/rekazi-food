function dragdrop(obj){obj.drag=false;obj.mousePosition={x:0,y:0};obj.ref={x:0,y:0};obj.timer=null;obj.snapThreshold=40;obj.clickCancel=false;var hasTouch='ontouchstart'in window,resizeEvent='onorientationchange'in window?'orientationchange':'resize',startEvent=hasTouch?'touchstart':'mousedown',moveEvent=hasTouch?'touchmove':'mousemove',endEvent=hasTouch?'touchend':'mouseup',cancelEvent=hasTouch?'touchcancel':'mouseup';ueUtils.addEvent(obj,startEvent,function(e){obj.drag=true;obj.clickCancel=false;obj.mousePosition=ueUtils.getMousePosition(e);obj.ref.x=obj.offsetLeft;obj.ref.y=obj.offsetTop;obj.timer=setTimeout(function(){obj.clickCancel=true;fireEvent(obj,"tap");},800);ueUtils.preventDefault(e);},false);ueUtils.addEvent(obj.parentNode,moveEvent,function(e){if(!obj.drag)return;obj.clickCancel=true;var pos={};var desp={};pos=ueUtils.getMousePosition(e);desp.x=pos.x-obj.mousePosition.x;desp.y=pos.y-obj.mousePosition.y;if(obj.timer){clearInterval(obj.timer);obj.timer=null;}},false);ueUtils.addEvent(document,endEvent,function(e){if(!obj.drag)return;obj.drag=false;var event="";var desp={};pos=ueUtils.getMousePosition(e);desp.x=pos.x-obj.mousePosition.x;desp.y=pos.y-obj.mousePosition.y;if(Math.abs(desp.x)>obj.snapThreshold){if(pos.x>obj.mousePosition.x){event="swiperight";}else{event="swipeleft";}}
if(Math.abs(desp.y)>obj.snapThreshold){if(pos.y>obj.mousePosition.y)
event="swipebottom";else{event="swipetop";}}
if(event){ueUtils.fireEvent(obj,event);}
if(obj.timer){clearInterval(obj.timer);obj.timer=null;}},false);}
var ueUtils={insertAfter:function(newNode,existingNode){existingNode.parentNode.insertBefore(newNode,existingNode.nextSibling);},getElementsByClass:function(searchClass,node,tagName){if(node==null)node=document;if(tagName==null)tagName="*";var el=[];var tags=node.getElementsByTagName(tagName);var tcl=" "+searchClass+" ";for(var i=0,j=0,nTags=tags.length;i<nTags;++i){var test=" "+tags[i].className+" ";if(test.indexOf(tcl)!=-1)
el[j++]=tags[i];}
return el;},addClass:function(node,className){if(typeof node=="string")node=document.getElementById(node);if(!node)return;var pattern=new RegExp("(^|\\s)"+className+"(\\s|$)");if(!pattern.test(node.className)){node.className+=' '+className;}},removeClass:function(node,className){if(typeof node=="string")node=document.getElementById(node);if(!node)return;var pattern=new RegExp("(^|\\s)"+className+"(\\s|$)");node.className=node.className.replace(pattern,' ');},toggleClass:function(node,className){if(typeof node=="string")node=document.getElementById(node);if(!node)return;var pattern=new RegExp("(^|\\s)"+className+"(\\s|$)");if(!pattern.test(node.className)){node.className+=" "+className;return true;}else{node.className=node.className.replace(pattern," ");return false;}},addEvent:function(obj,evt,func,capture){if(typeof func!='function')
return false;if(obj.addEventListener){obj.addEventListener(evt,func,capture);return true;}else if(obj.attachEvent){obj.attachEvent('on'+evt,function(e){func.call(obj,e);});return true;}
return false;},removeEvent:function(obj,evt,func,capture){if(typeof func!='function')
return false;if(obj.removeEventListener){obj.removeEventListener(evt,func,capture);return true;}else if(obj.detachEvent){obj.detachEvent('on'+evt,func);return true;}
return false;},fireEvent:function(obj,evt){if(!obj)return false;if(document.createEvent){var event=document.createEvent("CustomEvent");event.initCustomEvent(evt,true,true,{});obj.dispatchEvent&&obj.dispatchEvent(event);return true;}else if(document.createEventObject){var event=document.createEventObject();obj.fireEvent&&obj.fireEvent("on"+evt,event);return true;}
return false;},getMousePosition:function(e){e=e||window.event;var cursor={x:0,y:0};if(e.pageX||e.pageY){cursor.x=e.pageX;cursor.y=e.pageY;}else if(e.clientX||e.clientY){var de=document.documentElement;var b=document.body;cursor.x=e.clientX+(de.scrollLeft||b.scrollLeft)-(de.clientLeft||0);cursor.y=e.clientY+(de.scrollTop||b.scrollTop)-(de.clientTop||0);}else if(e.changedTouches){cursor.x=e.changedTouches[0].pageX;cursor.y=e.changedTouches[0].pageY;}
return cursor;},preventDefault:function(evt){if(typeof evt.preventDefault==="function"&&evt.cancelable)
evt.preventDefault();else
evt.returnValue=false;},readCookie:function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');var max=ca.length
for(var i=0;i<max;++i){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;},createCookie:function(name,value,days){if(days){var d=new Date();d.setTime(d.getTime()+days*24*3600*1000);var expires="; expires="+d.toGMTString();}else var expires="";var domain=location.hostname.match(/[a-zA-Z0-9-]+\.[a-zA-Z]{2,6}?$/);document.cookie=name+"="+value+expires+"; path=/"+(domain[0]?";domain="+domain[0]:"");},removeCookie:function(name){document.cookie=name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";},stripTags:function(html){var noHTML=/(<([^>]+)>)/ig;return html.replace(noHTML,'');},strToXml:function(str){var xmlDoc=null;if(window.DOMParser){parser=new DOMParser();xmlDoc=parser.parseFromString(str,"text/xml");}
else{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(str);}
return xmlDoc;}};ueUtils.font={size:5,minSize:3,maxSize:7,inc:function(){if(ueUtils.font.size<ueUtils.font.maxSize){ueUtils.font.size++;var obj=document.getElementById("tamano");if(obj)obj.className="tamano tamanoletra"+ueUtils.font.size;}},dec:function(){if(ueUtils.font.size>ueUtils.font.minSize){ueUtils.font.size--;var obj=document.getElementById("tamano");if(obj)obj.className="tamano tamanoletra"+ueUtils.font.size;}}}
String.prototype.trim=function(){return(this.replace(/^\s+|\s+$/g,""));};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(v){for(var i=0,iTop=this.length;i<iTop;++i){if(this[i]===v){return i;}}
return-1;}}
ueUtils.serialize=function(mixed_value){var val,key,okey,ktype='',vals='',count=0,_utf8Size=function(str){var size=0,i=0,l=str.length,code='';for(i=0;i<l;i++){code=str.charCodeAt(i);if(code<0x0080){size+=1;}else if(code<0x0800){size+=2;}else{size+=3;}}
return size;},_getType=function(inp){var match,key,cons,types,type=typeof inp;if(type==='object'&&!inp){return'null';}
if(type==='object'){if(!inp.constructor){return'object';}
cons=inp.constructor.toString();match=cons.match(/(\w+)\(/);if(match){cons=match[1].toLowerCase();}
types=['boolean','number','string','array'];for(key in types){if(cons==types[key]){type=types[key];break;}}}
return type;},type=_getType(mixed_value);switch(type){case'function':val='';break;case'boolean':val='b:'+(mixed_value?'1':'0');break;case'number':val=(Math.round(mixed_value)==mixed_value?'i':'d')+':'+mixed_value;break;case'string':val='s:'+_utf8Size(mixed_value)+':"'+mixed_value+'"';break;case'array':case'object':val='a';for(key in mixed_value){if(mixed_value.hasOwnProperty(key)){ktype=_getType(mixed_value[key]);if(ktype==='function'){continue;}
okey=(key.match(/^[0-9]+$/)?parseInt(key,10):key);vals+=this.serialize(okey)+this.serialize(mixed_value[key]);count++;}}
val+=':'+count+':{'+vals+'}';break;case'undefined':default:val='N';break;}
if(type!=='object'&&type!=='array'){val+=';';}
return val;}
ueUtils.unserialize=function(data){var that=this,utf8Overhead=function(chr){var code=chr.charCodeAt(0);if(code<0x0080){return 0;}
if(code<0x0800){return 1;}
return 2;},error=function(type,msg,filename,line){throw new that.window[type](msg,filename,line);},read_until=function(data,offset,stopchr){var i=2,buf=[],chr=data.slice(offset,offset+1);while(chr!=stopchr){if((i+offset)>data.length){error('Error','Invalid');}
buf.push(chr);chr=data.slice(offset+(i-1),offset+i);i+=1;}
return[buf.length,buf.join('')];},read_chrs=function(data,offset,length){var i,chr,buf;buf=[];for(i=0;i<length;i++){chr=data.slice(offset+(i-1),offset+i);buf.push(chr);length-=utf8Overhead(chr);}
return[buf.length,buf.join('')];},_unserialize=function(data,offset){var dtype,dataoffset,keyandchrs,keys,readdata,readData,ccount,stringlength,i,key,kprops,kchrs,vprops,vchrs,value,chrs=0,typeconvert=function(x){return x;};if(!offset){offset=0;}
dtype=(data.slice(offset,offset+1)).toLowerCase();dataoffset=offset+2;switch(dtype){case'i':typeconvert=function(x){return parseInt(x,10);};readData=read_until(data,dataoffset,';');chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case'b':typeconvert=function(x){return parseInt(x,10)!==0;};readData=read_until(data,dataoffset,';');chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case'd':typeconvert=function(x){return parseFloat(x);};readData=read_until(data,dataoffset,';');chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case'n':readdata=null;break;case's':ccount=read_until(data,dataoffset,':');chrs=ccount[0];stringlength=ccount[1];dataoffset+=chrs+2;readData=read_chrs(data,dataoffset+1,parseInt(stringlength,10));chrs=readData[0];readdata=readData[1];dataoffset+=chrs+2;if(chrs!=parseInt(stringlength,10)&&chrs!=readdata.length){error('SyntaxError','String length mismatch');}
break;case'a':readdata={};keyandchrs=read_until(data,dataoffset,':');chrs=keyandchrs[0];keys=keyandchrs[1];dataoffset+=chrs+2;for(i=0;i<parseInt(keys,10);i++){kprops=_unserialize(data,dataoffset);kchrs=kprops[1];key=kprops[2];dataoffset+=kchrs;vprops=_unserialize(data,dataoffset);vchrs=vprops[1];value=vprops[2];dataoffset+=vchrs;readdata[key]=value;}
dataoffset+=1;break;default:error('SyntaxError','Unknown / Unhandled data type(s): '+dtype);break;}
return[dtype,dataoffset-offset,typeconvert(readdata)];};return _unserialize((data+''),0)[2];}
var ueHeader={cookieName:"UE_pref",editions:["n","a"],devices:["e","m"],indexOf:function(array,str){if(array.indexOf)return(array.indexOf(str)!=-1);for(var i=0,top=array.length;i<top;++i){if(array[i]==str)return true;}
return false;},readPreferences:function(){try{var cookie=ueUtils.readCookie(ueHeader.cookieName);if(!cookie)return false;cookie=JSON.parse(decodeURIComponent(cookie));return cookie;}catch(e){return false;}},readPreferencesOLD:function(){try{var cookie=ueUtils.readCookie(ueHeader.cookieName);if(!cookie)return false;cookie=ueUtils.unserialize(decodeURIComponent(cookie));cookieA={};cookieA.v=cookie[0];cookieA.d=cookie[1];cookieA.u=cookie[2];return cookieA;}catch(e){return false;}},savePreferences:function(pref){ueUtils.createCookie(ueHeader.cookieName,encodeURIComponent(JSON.stringify(pref)),365*4);},savePreferencesOLD:function(pref){ueUtils.createCookie(ueHeader.cookieName,encodeURIComponent(ueUtils.serialize({0:pref.v,1:pref.d,2:pref.u})),365*4);},changeEdition:function(edition){if(!edition||!ueHeader.indexOf(ueHeader.editions,edition))return false;var pref=ueHeader.readPreferences();if(pref){if(pref.v==edition)return false;pref.v=edition;ueHeader.savePreferences(pref);}
else{pref=ueHeader.readPreferencesOLD();if(pref){if(pref.v==edition)return false;pref.v=edition;ueHeader.savePreferencesOLD(pref);}}
location.href=location.pathname;},changeDevice:function(device){if(!device||!ueHeader.indexOf(ueHeader.devices,device))return false;var pref=ueHeader.readPreferences();if(pref){if(pref.d==device)return false;pref.d=device;ueHeader.savePreferences(pref);}else{pref=ueHeader.readPreferencesOLD();if(pref){if(pref.d==device)return false;pref.d=device;ueHeader.savePreferencesOLD(pref);}}
if(device=='e')
location.href=location.pathname+"?intcmp=BACK1";else
location.href=location.pathname+"?intcmp=BACK2";},changeUserOption:function(){var pref=ueHeader.readPreferences();if(pref){pref.u=1;ueHeader.savePreferences(pref);document.getElementById('popup-cambio-version').style.display='none';}else{pref=ueHeader.readPreferencesOLD();if(pref){pref.u=1;ueHeader.savePreferencesOLD(pref);document.getElementById('popup-cambio-version').style.display='none';}else{location.href=location.pathname;}}},search:function(){var search=document.getElementById("buscar");if(!search)return;if((search.className.indexOf("open")==-1)||(search.value=="")){ueUtils.toggleClass(search,"open");}else{search.form.submit()}}}
ueUtils.addEvent(window,"load",function(){var sum=document.getElementsByTagName("summary");for(var i=0,top=sum.length;i<top;++i){if(sum[i].parentNode.tagName.toLowerCase()=="details"){sum[i].onclick=function(){this.parentNode.className=(this.parentNode.className=="open")?"close":"open";}}}},false);ueUtils.loadEcommerce=function(hash){if(typeof hash!="object")return;if(typeof hash.idCont!="string")return;var cont=document.getElementById(hash.idCont);if(!cont)return;var data={portal:hash.portal,seccion:hash.seccion,idItem:hash.idItem,tags:hash.tags}
var url=hash.url+encodeURIComponent(JSON.stringify(data));var response=ueAjax.getRequest(url,"text");cont.innerHTML=response;}
function otras_redes(){if(!/msie/i.test(navigator.userAgent))return;try{var menu=ueUtils.getElementsByClass("compartir")[0],subMenu=ueUtils.getElementsByClass("otras-redes")[0],timer1=null;subMenu.style.display="none";function clearTimer1(){if(timer1){clearTimeout(timer1);timer1=null;}}
function over(){clearTimer1();subMenu.style.display="block";}
function out(){clearTimer1();timer1=setTimeout(function(){subMenu.style.display="none";},50);}
menu.onmouseover=over;menu.onmouseout=out;}catch(e){}}
var ueMenu=window.ueMenu||(function(){function closeMenu(){ueUtils.removeClass("desplegable","open");}
return{toggle:function(e){if(ueUtils.toggleClass("desplegable","open")){ueUtils.addEvent(document,"click",closeMenu,false);}
else{ueUtils.removeEvent(document,"click",closeMenu,false);}
if(e.stopPropagation){e.stopPropagation();}
else{e.cancelBubble=true;}
return false;}}})();
