"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6761],{76761:function(e,t,a){a.d(t,{d:function(){return ew}});var s,l,i=a(651),r=a(42451),n=a(75418),d=a(17153),c=a(70681),o=a(13664),m=a(80324),x=a.n(m),u=a(95182),p=a(92379),h=a(57395),v=a.n(h),j=a(11948),g=a(79171);function b(e){var t,a,s;let{instructions:l}=e,{t:r}=(0,j.qM)(j.aD.COMMON),[d,c]=(0,p.useState)(null),[m,u]=(0,p.useState)(!1);return l.length?(0,i.jsxs)("div",{className:"pl-6 pt-5",onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},children:[(0,i.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,i.jsx)(n.Z,{className:"size-4 text-slate-9 dark:text-slate-10"}),(0,i.jsx)("h4",{className:"font-title text-slate-11 dark:text-white",children:r("learn","Learn")})]}),(0,i.jsxs)("div",{className:"relative flex-col gap-3",children:[(0,i.jsxs)(o.fC,{className:"pb-5",style:{maxWidth:"100%"},children:[(0,i.jsx)(o.l_,{children:(0,i.jsx)("div",{className:"flex flex-row gap-3 pr-6",children:l.map((e,t)=>(0,i.jsx)("div",{className:"flex flex-shrink-0 gap-3 rounded-xl border border-slate-3",children:(0,i.jsx)(f,{title:e.title,description:e.description,thumbnail:e.cover.url,onClick:()=>{g.c.capture("homepage:learn_thumbnail_click",{video_id:e.id,source:"homepage"}),c(e.id)}},e.id)},t))})}),(0,i.jsx)(o.LW,{orientation:"horizontal",className:x()("mr-6 h-2 rounded-xl bg-slate-3 transition-opacity duration-100",m?"opacity-1":"opacity-0"),children:(0,i.jsx)(o.bU,{className:"rounded-xl bg-slate-8",style:{height:"8px"}})})]}),null!=d?(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{c(null)},children:(0,i.jsx)("div",{className:"mt-3 w-full flex-grow overflow-hidden",style:{maxWidth:"1244px",maxHeight:"700px"},onClick:e=>{e.stopPropagation()},children:(0,i.jsx)(N,{url:null!==(s=null===(a=l.find(e=>e.id===d))||void 0===a?void 0:null===(t=a.videoContent[0])||void 0===t?void 0:t.url)&&void 0!==s?s:"",onClose:()=>{c(null)}},d)})}):null]})]}):null}let f=e=>{let{title:t,description:a,onClick:s,thumbnail:l}=e,[r,n]=(0,p.useState)(!1);return(0,i.jsxs)("div",{className:"max-h-50 flex w-80 cursor-pointer gap-3 rounded-xl bg-white p-2 ring-0 transition-all duration-300 hover:bg-slate-3 dark:bg-slate-1 dark:hover:bg-slate-4",onClick:s,onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)},children:[(0,i.jsxs)("div",{className:"relative h-28 w-80 grow overflow-hidden rounded-md bg-white dark:bg-slate-3 dark:shadow-md dark:hover:shadow-lg",children:[(0,i.jsx)("img",{src:l,alt:"".concat(t," thumbnail"),className:"h-full w-full object-cover",onClick:s}),(0,i.jsx)("div",{className:x()("absolute inset-0 flex transform items-center justify-center transition-transform duration-200 ease-in-out",r&&"scale-110"),children:(0,i.jsx)(d.Z,{className:"size-8 text-slate-10"})})]}),(0,i.jsxs)("div",{className:"h-full w-80",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-slate-12 dark:text-white",children:t}),(0,i.jsx)("p",{className:"text-desc line-clamp-4 text-slate-10 dark:text-slate-11",children:a})]})]})},N=e=>{let{url:t,onClose:a}=e,[s,l]=(0,p.useState)(!1);return(0,i.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:0}},className:"relative",onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:(0,i.jsxs)("div",{className:"relative overflow-hidden rounded-xl",children:[(0,i.jsx)("button",{className:x()("absolute right-2 top-2 z-10 rounded-full bg-black bg-opacity-50 p-1 text-white opacity-0 transition-opacity duration-200 focus:outline-none",s&&"opacity-100"),onClick:a,children:(0,i.jsx)(c.Z,{className:"h-6 w-6"})}),(0,i.jsx)(v(),{url:t,controls:!0,width:"100%",height:"100%",className:"aspect-[16/9]",style:{maxHeight:"700px",maxWidth:"1244px"},stopOnUnmount:!0})]})},t)};var w=a(20347),y=a(31275),k=a(28541),_=a.n(k),C=a(10048),M=a(54669),E=a(51247),T=a(4804),A=a(44248),S=a(76850),L=a(69249),I=a(30892),P=a.n(I),O=a(14104),U=a(36176),z=a(38913),q=a(37630),D=a(94332);function F(e){var t;let{id:a,name:s,type:l,createdAt:r,creator:n,usedAt:d}=e,{locale:c,tCommon:o}=(0,j.qM)();return(0,i.jsx)(z.r,{eventLabel:"recent_item",href:"tabular_review"===l?"/tabular-reviews/".concat(a):"".concat(q.C6.href,"/").concat(a),className:"cursor-[var(--btn-cursor)] rounded-xl px-4 py-4 hover:bg-slate-2 dark:hover:bg-slate-3",onClick:()=>{g.c.capture("homepage:recent_item_click",{item_type:l,source:"homepage"})},children:(0,i.jsxs)(u.E.div,{layoutId:a,layout:!0,initial:{y:0,opacity:0},exit:{y:0,opacity:0},animate:{y:0,opacity:1},className:"grid grid-cols-[minmax(0,160px)_minmax(200px,2000px)_minmax(0,160px)_minmax(0,160px)] items-center gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:["tabular_review"===l?(0,i.jsx)(U.$,{className:"size-3 stroke-[1.6px] text-slate-11"}):(0,i.jsx)(L.Z,{className:"size-3 text-slate-11"}),(0,i.jsx)("p",{className:"truncate text-xs text-slate-11",children:o(l,P()(l.split("_").join(" ")))})]}),(0,i.jsx)("p",{className:"truncate py-0.5 text-sm text-slate-12",children:s}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(O.Yt,{name:n.givenName,userId:null!==(t=n.id)&&void 0!==t?t:"",size:"1"}),(0,i.jsx)("p",{className:"truncate text-xs text-slate-12",children:(0,D.VG)(r,c)})]}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("p",{className:"truncate text-xs text-slate-12",children:void 0!==d?(0,D.VG)(d,c):"-"})})]})},a)}function Z(e){let{items:t,maxItemCount:a}=e,{t:s}=(0,j.qM)(j.aD.COMMON),[l,r]=(0,p.useState)({value:"used_at",asc:!0}),n=(0,p.useMemo)(()=>t.sort((e,t)=>{let a=(e,t,a)=>a?e.localeCompare(t):t.localeCompare(e),s=(e,t,a)=>(new Date(e).getTime()-new Date(t).getTime())*(a?-1:1);return(0,S.EQ)(l.value).with("name",()=>a(e.name,t.name,l.asc)).with("type",()=>a(e.type,t.type,l.asc)).with("created_at",()=>s(e.createdAt,t.createdAt,l.asc)).otherwise(()=>s(e.usedAt,t.usedAt,l.asc))}),[t,l]);return(0,i.jsxs)("div",{className:"flex flex-col rounded-xl",style:{minHeight:"".concat(56*a+80,"px")},children:[(0,i.jsx)("div",{className:"sticky top-0 z-[1] pt-4 dark:bg-slate-2",children:(0,i.jsxs)("div",{className:"grid grid-cols-[minmax(0,160px)_minmax(200px,2000px)_minmax(0,160px)_minmax(0,160px)] items-center gap-2 rounded-xl border border-slate-4 bg-slate-3 px-4 py-3 text-xs font-medium dark:bg-slate-3",children:[(0,i.jsx)("div",{className:"truncate",children:(0,i.jsx)(R,{label:s("type","Type"),value:"type",sort:l,setSort:r})}),(0,i.jsx)("div",{className:"truncate",children:(0,i.jsx)(R,{label:s("name","Name"),value:"name",sort:l,setSort:r})}),(0,i.jsx)("div",{className:"truncate",children:(0,i.jsx)(R,{label:s("created-at","Created on"),value:"created_at",sort:l,setSort:r})}),(0,i.jsx)("div",{className:"truncate",children:(0,i.jsx)(R,{label:s("used-at","Last used"),value:"used_at",sort:l,setSort:r})})]})}),(0,i.jsx)("div",{className:"flex flex-col gap-0.5 pt-0.5",children:n.map(e=>(0,i.jsx)(F,{id:e.id,name:e.name,createdAt:e.createdAt,usedAt:e.usedAt,creator:e.creator,type:e.type},e.id))})]})}(s=l||(l={})).Name="name",s.CreatedAt="created_at",s.UsedAt="used_at",s.Type="type";let R=e=>{let{label:t,value:a,sort:s,setSort:l}=e;return(0,i.jsxs)("div",{className:"flex select-none items-center gap-1",onClick:()=>{l(e=>e.value===a?{value:a,asc:!e.asc}:{value:a,asc:!0})},children:[(0,i.jsx)("p",{className:"truncate text-xs font-medium",children:t}),s.value===a&&(0,i.jsx)(A.Z,{className:x()("h-3 w-3 text-slate-12",s.asc?"rotate-180":"rotate-0")})]})};function V(){var e;let{t}=(0,j.qM)(j.aD.COMMON),{project:a}=(0,E.PY)(),{user:s}=(0,T.aF)(),[l,r]=(0,p.useState)(""),[n,d]=(0,p.useState)(5),[c,o]=(0,p.useState)(0),m=(0,p.useRef)(null),{data:u,isLoading:h}=(0,M.mCD)({projectId:a.id,limit:5},{enabled:!!a.id,staleTime:0}),{data:v,isLoading:g}=(0,M.MEU)({userId:null!==(e=null==s?void 0:s.id)&&void 0!==e?e:"",projectId:a.id,limit:100},{enabled:!!(null==s?void 0:s.id),staleTime:0}),b=(0,p.useMemo)(()=>{var e,t;let a=null!==(e=null==u?void 0:u.tabular_reviews.map(e=>({id:e.id,name:e.name,createdAt:e.created_at,usedAt:e.updated_at,creator:{id:e.project.creator.id,givenName:e.project.creator.givenName},type:"tabular_review"})))&&void 0!==e?e:[],l=null!==(t=null==v?void 0:v.threads.map(e=>{var t,a;return{id:e.id,name:e.title,createdAt:e.created_at,usedAt:null!==(a=null===(t=e.messages[0])||void 0===t?void 0:t.created_at)&&void 0!==a?a:"",creator:{id:null==s?void 0:s.id,givenName:null==s?void 0:s.givenName},type:"thread"}}))&&void 0!==t?t:[];return _()([...a,...l],"usedAt").reverse()},[u,v]);if((0,p.useEffect)(()=>{o(b.length)},[b]),!h&&(null==u?void 0:u.tabular_reviews.length)===0&&(null==v?void 0:v.threads.length)===0)return null;let f=()=>{m.current&&m.current.scrollIntoView({behavior:"smooth"})},N=!h&&!g&&c>n;return(0,i.jsxs)("div",{className:"px-6 py-5",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(w.Z,{className:"size-4 text-slate-9 dark:text-slate-10"}),(0,i.jsx)("h4",{className:"font-title text-slate-11 dark:text-white",children:t("recent","Recent")})]}),(0,i.jsxs)(C.Z,{className:"max-w-[300px] grow",children:[(0,i.jsx)(C.Z.Slot,{children:(0,i.jsx)(y.Z,{className:"h-4 w-4 shrink-0"})}),(0,i.jsx)(C.Z.TextSlot,{placeholder:t("search-recent","Search among your recent activities"),value:l,onChange:e=>{r(e.target.value)}})]})]}),h||g?(0,i.jsx)(W,{}):(0,i.jsx)(Z,{items:b.slice(0,n).filter(e=>e.name.toLowerCase().includes(l.toLowerCase())),maxItemCount:Math.min(c,n)}),N?(0,i.jsx)("div",{className:"pb-2",children:(0,i.jsx)("button",{className:x()("btn btn-soft mx-auto bg-transparent transition-opacity duration-200",l&&"disabled opacity-0"),onClick:()=>{d(e=>e+10),setTimeout(f,200)},children:t("Show more","Show more")})}):null,(0,i.jsx)("div",{ref:m})]})}function W(){return Array.from(Array(6)).map((e,t)=>(0,i.jsxs)("div",{className:"grid h-[56px] grid-cols-12 items-center gap-2 rounded-xl px-4",children:[(0,i.jsx)("div",{className:x()("col-span-4 h-2 animate-pulse rounded-full bg-slate-4",t%2==0?"w-3/4":"w-1/2")}),(0,i.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[(0,i.jsx)("div",{className:"h-6 w-6 shrink-0 animate-pulse rounded-full bg-slate-4"}),(0,i.jsx)("div",{className:"h-2 w-1/2 animate-pulse rounded-full bg-slate-4"})]}),(0,i.jsx)("div",{className:"col-span-2",children:(0,i.jsx)("div",{className:x()("h-2 animate-pulse rounded-full bg-slate-4",t%3==0?"w-1/2":"w-3/4")})}),(0,i.jsx)("div",{className:"col-span-2",children:(0,i.jsx)("div",{className:x()("h-2 animate-pulse rounded-full bg-slate-4",t%2==0?"w-2/3":"w-2/5")})})]},t))}var H=a(22101),B=a(25865),G=a(66206);function Q(){let{t:e}=(0,j.qM)(j.aD.COMMON),t=(0,B.t)(),{user:a}=(0,T.aF)(),[s,l]=(0,p.useState)(!1),r=!!(null==a?void 0:a.id),{data:n,isLoading:d}=(0,M.LZ1)({},{enabled:r,staleTime:0});if(void 0===n&&!d)return null;let c=e=>{g.c.capture("homepage:shortcut_use",{shortcut_id:e.id,shortcut_name:e.title,source:"homepage"}),t.push({pathname:"".concat(q.C6.href,"/").concat((0,D.Vj)()),query:{shortcutId:e.id}},"shortcut_template_card")};return(0,i.jsxs)("div",{className:"pl-6 pt-5",onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(L.Z,{className:"size-4 text-slate-9 dark:text-slate-10"}),(0,i.jsx)("h4",{className:"font-title text-slate-11 dark:text-white",children:e("threads.title","Threads")})]}),(0,i.jsx)("p",{className:"mb-3 text-[13px] text-slate-10 dark:text-slate-11",children:e("threads.description","Ideal for summarising and asking questions to a document")}),(0,i.jsxs)(o.fC,{className:"pb-5",style:{maxWidth:"100%"},children:[(0,i.jsx)(o.l_,{children:(0,i.jsx)("div",{className:"flex gap-6 pr-6",children:d?(0,i.jsx)($,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{onClick:()=>{g.c.capture("homepage:thread_create",{source:"homepage"}),t.push("".concat(q.C6.href,"/").concat((0,D.Vj)()),"card_create_new")},className:"flex w-40 shrink-0 select-none flex-col items-center justify-center gap-2 rounded-2xl border border-slate-4 bg-white p-6 hover:bg-slate-3 dark:bg-slate-1 dark:hover:bg-slate-4",children:[(0,i.jsx)("p",{className:"text-center font-title text-base",children:e("threads.create-new-thread","Create new thread")}),(0,i.jsx)(L.Z,{className:"h-6 w-6 stroke-[1.6px] text-slate-12"})]}),null==n?void 0:n.tools.map(e=>(0,i.jsx)(Y,{...e,navigate:()=>{c(e)},isPublic:e.public,shortcutCreator:e.user}))]})})}),(0,i.jsx)(o.LW,{orientation:"horizontal",className:x()("mr-6 h-2 rounded-xl bg-slate-3 transition-opacity duration-100",s?"opacity-1":"opacity-0"),children:(0,i.jsx)(o.bU,{className:"rounded-xl bg-slate-8",style:{height:"8px"}})})]})]})}function Y(e){var t;let{id:a,title:s,created_by:l,organisation:r,navigate:n,created_at:d,isPublic:c,shortcutCreator:o}=e,{t:m,locale:u}=(0,j.qM)(j.aD.SHORTCUTS),p=(0,G.X)(a),h={size:"1",className:"h-5 w-5"};return(0,i.jsxs)("div",{className:"relative flex h-40 w-40 flex-col gap-2 rounded-xl border border-slate-4 bg-white transition-all hover:bg-slate-3 dark:bg-slate-1 dark:hover:bg-slate-4",onClick:n,children:[(0,i.jsx)("div",{className:x()("h-1/3 w-full rounded-t-xl",null!==(t=null==p?void 0:p.color)&&void 0!==t?t:"bg-slate-11/10")}),(0,i.jsx)("div",{className:"absolute z-10 ml-2 mt-6 flex h-12 w-12 items-center justify-center rounded-[4px] bg-white dark:bg-slate-1",children:(0,i.jsx)(X,{id:a})}),(0,i.jsx)("div",{className:"mt-1 flex w-full flex-grow p-2",children:(0,i.jsx)("p",{className:"line-clamp-2 h-10 overflow-hidden text-sm text-slate-12",children:null===l?m("title.".concat(a),s):s})}),(0,i.jsxs)("div",{className:"mt-auto flex items-center gap-2 px-2 pb-1.5",children:[(0,i.jsx)("p",{className:"slate-2 line-clamp-1 text-xs",children:(0,D.VG)(d,u)}),(0,S.EQ)([c,!!l]).with([!0,S.P._],()=>(0,i.jsx)(O.qE,{...h,src:"/logo/Leya-Symbol.svg",shape:"square"})).with([!1,!0],()=>{var e;return(0,i.jsx)(O.Yt,{...h,userId:null!==(e=null==o?void 0:o.id)&&void 0!==e?e:"",name:null==o?void 0:o.givenName})}).with([!1,!1],()=>(0,i.jsx)(O.yN,{...h,name:null==r?void 0:r.name})).exhaustive()]})]})}let X=e=>{var t;let{id:a}=e,s=(0,G.X)(a);return s||null!=a?(0,i.jsx)("div",{className:x()("shrink-0 rounded-[4px] p-2.5",null!==(t=null==s?void 0:s.color)&&void 0!==t?t:"bg-slate-11/10"),children:(null==s?void 0:s.Component)?(0,i.jsx)(s.Component,{className:"h-4 w-4"}):(0,i.jsx)(H.Z,{className:"h-4 w-4"})}):null};function $(){return[1,2,3,4].map(e=>(0,i.jsxs)("div",{className:"relative flex h-[187px] w-[300px] shrink-0 select-none flex-col overflow-hidden rounded-xl border border-slate-2 p-6 dark:border-slate-3",children:[(0,i.jsx)("div",{className:"mb-2 h-3 w-1/3 animate-pulse rounded-full bg-slate-4"}),(0,i.jsx)("div",{className:"h-4 w-3/4 animate-pulse rounded-full bg-slate-4"}),(0,i.jsx)("div",{className:"mt-2 h-3 w-1/2 animate-pulse rounded-lg bg-slate-4"}),(0,i.jsx)("div",{className:"mt-1 h-3 w-1/3 animate-pulse rounded-lg bg-slate-4"}),(0,i.jsx)("div",{className:"mt-auto h-2 w-[45px] animate-pulse rounded-full bg-slate-4"}),(0,i.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,i.jsx)("div",{className:"h-6 w-6 animate-pulse rounded-full bg-slate-4"}),(0,i.jsx)("div",{className:"h-3 w-10 animate-pulse rounded-full bg-slate-4"})]})]},e))}function J(){let{t:e}=(0,j.qM)(j.aD.COMMON),{user:t}=(0,T.aF)();return(0,i.jsxs)("p",{className:"hidden pt-8 text-center font-title text-3xl font-light text-slate-12 sm:block",children:[(0,i.jsxs)("span",{className:"font-semibold",children:[(0,S.EQ)(new Date().getHours()).with(S.P.when(e=>4<=e&&e<12),()=>e("welcome.message.good-morning","Good morning")).with(S.P.when(e=>12<=e&&e<18),()=>e("welcome.message.good-afternoon","Good afternoon")).with(S.P.when(e=>1<=e&&e<4),()=>e("welcome.message.up-late","You're up late")).otherwise(()=>e("welcome.message.good-evening","Good evening")),","]}),"string"==typeof(null==t?void 0:t.givenName)&&""!==t.givenName?" ".concat(t.givenName.split(" ")[0]):"","!"]})}var K=a(11375),ee=a(87331),et=a(50426),ea=a(8774);function es(e){let{setTemplateDialogOpen:t,setOpenEntry:a,templateDialogOpen:s,openEntry:l,handleUseTemplate:r}=e,{t:n}=(0,j.qM)(j.aD.TABULAR_REVIEW);return(0,i.jsxs)("div",{className:"flex items-center justify-between pr-6",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(U.$,{className:"size-4 stroke-[1.6px] text-slate-9 dark:text-slate-10"}),(0,i.jsx)("h4",{className:"font-title text-slate-11 dark:text-white",children:n("tabular reviews","Tabular Reviews")})]}),(0,i.jsx)("p",{className:"mb-3 text-[13px] text-slate-10 dark:text-slate-11",children:n("tabular review subheader","Excel at bulk review tasks, such as contract extraction and comparison")})]}),(0,i.jsxs)("button",{className:"btn btn-soft",onClick:()=>{t(!0),a(ee.d.All)},children:[(0,i.jsx)(ea.Q,{className:"h-4 w-4 shrink-0"}),n("see-all-templates","All templates")]}),(0,i.jsx)(ee.B,{open:s,setOpen:t,onUseTemplate:r,openEntry:l})]})}let el=()=>Array.from({length:4}).map((e,t)=>(0,i.jsxs)("div",{className:"relative flex h-[187px] w-[280px] shrink-0 select-none flex-col overflow-hidden rounded-xl border border-slate-2 p-6 dark:border-slate-3",children:[(0,i.jsx)("div",{className:"mb-2 h-3 w-1/3 animate-pulse rounded-full bg-slate-4"}),(0,i.jsx)("div",{className:"h-4 w-3/4 animate-pulse rounded-full bg-slate-4"}),(0,i.jsx)("div",{className:"mt-2 h-3 w-1/2 animate-pulse rounded-lg bg-slate-4"}),(0,i.jsx)("div",{className:"mt-1 h-3 w-1/3 animate-pulse rounded-lg bg-slate-4"}),(0,i.jsx)("div",{className:"mt-auto h-2 w-[45px] animate-pulse rounded-full bg-slate-4"}),(0,i.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,i.jsx)("div",{className:"h-6 w-6 animate-pulse rounded-full bg-slate-4"}),(0,i.jsx)("div",{className:"h-3 w-10 animate-pulse rounded-full bg-slate-4"})]})]},t));var ei=a(22334),er=a(38815),en=a(24659),ed=a(25616),ec=a(51696);function eo(e){let{children:t,layoutId:a,onUse:s,viewType:l="featured",onPreview:r}=e,{t:n}=(0,j.qM)(j.aD.TABULAR_REVIEW_TEMPLATES),{t:d}=(0,j.qM)(j.aD.COMMON),[c,o]=(0,p.useState)(!1);return(0,i.jsxs)(u.E.div,{layoutId:a,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2,ease:"easeOut"},onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},className:x()("relative flex w-[280px] min-w-[280px] flex-col justify-between gap-0.5 overflow-hidden rounded-xl border border-slate-3 bg-slate-2 bg-white p-6 dark:bg-slate-1 dark:shadow-sm","preview"===l?"max-h-[min(600px,90dvh)] w-[min(700px,90vw)] bg-white py-8 dark:bg-slate-1":"h-[187px] py-6 hover:bg-slate-3 dark:hover:bg-opacity-70"),onClick:e=>{e.stopPropagation()},children:[t,(0,i.jsx)(en.M,{children:c&&"featured"===l&&(0,i.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute bottom-0 left-0 right-0 z-10 bg-gradient-to-t from-slate-6 to-transparent p-5 dark:from-slate-1",children:(0,i.jsxs)(u.E.div,{initial:{y:20},animate:{y:0},exit:{y:20},className:"flex justify-end gap-1",children:[(0,i.jsx)("button",{className:"btn btn-soft grow",onClick:r,children:d("preview","Preview")}),(0,i.jsxs)("button",{className:"btn btn-solid grow",onClick:s,children:[(0,i.jsx)("p",{className:"text-xs font-medium",children:n("feat-card.use-template","Use template")}),(0,i.jsx)(u.E.div,{initial:{opacity:0,x:-5},animate:{opacity:1,x:0},exit:{opacity:0,x:-5},children:(0,i.jsx)(ei.Z,{className:"h-3 w-3"})})]})]})})})]})}var em=a(31534),ex=a(1301);let eu=e=>{let{columns:t}=e,[a,s]=(0,p.useState)(0),[l,r]=(0,p.useState)(0);return(0,i.jsxs)("div",{className:x()("flex grow flex-col gap-1 overflow-hidden"),children:[(0,i.jsxs)("p",{className:"pl-0.5 text-xs font-medium",children:[t.length," ",1===t.length?"column":"columns"]}),(0,i.jsx)(u.E.div,{initial:!1,onScroll:e=>{s(e.currentTarget.scrollTop),r(e.currentTarget.scrollHeight-e.currentTarget.scrollTop-e.currentTarget.clientHeight)},animate:{height:"auto"},className:x()("relative flex min-h-[170px] grow flex-col gap-1.5 border-b border-t border-slate-3","overflow-hidden overflow-y-auto",a>3?"border-t-slate-4":"border-t-transparent",l>3?"border-b-slate-4":"border-b-transparent"),children:t.map(e=>(0,i.jsx)(em.r,{column:e,viewType:ex.vQ.Preview},e.id))})]})};function ep(e){let{template:t,onUseTemplate:a,onClose:s,onPreviewTemplate:l}=e;return(0,i.jsx)(en.M,{children:(0,i.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",onClick:s,children:[(0,i.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/10 dark:bg-slate-1/30"}),(0,i.jsx)(eo,{layoutId:t.id,onUse:()=>{a(t.id)},onPreview:()=>{null==l||l(t.id)},viewType:"preview",children:(0,i.jsx)(eh,{template:t,onUseTemplate:a,onClose:s})})]})})}let eh=e=>{var t,a;let{template:s,onUseTemplate:l,onClose:r}=e,{t:n}=(0,j.qM)(j.aD.TABULAR_REVIEW_TEMPLATES);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(er.hU,{variant:"ghost",color:"gray",size:"1",onClick:r,className:"absolute right-5 top-5",children:(0,i.jsx)(c.Z,{className:"h-5 w-5"})})}),(0,i.jsxs)("div",{className:"grid h-full grid-cols-5 gap-5 overflow-hidden",children:[(0,i.jsxs)("div",{className:"col-span-2 flex flex-col",children:[(0,i.jsxs)("div",{className:"mb-0.5 flex items-center gap-1",children:[(0,i.jsx)(ed.t,{className:"h-4 w-4 text-[#C0C0C3]"}),!!s.tag&&(0,i.jsx)("p",{className:"truncate rounded bg-[#EFF4FF] px-2 py-1 text-xs text-[#4478FF]",children:s.tag})]}),(0,i.jsxs)("div",{className:"mb-2 flex-1",children:[(0,i.jsx)("h4",{className:"mb-1 line-clamp-2 text-lg leading-[22px]",children:s.title}),(0,i.jsx)("p",{className:"h-full overflow-hidden text-ellipsis pt-1 text-xs text-slate-400",children:s.description})]}),(0,i.jsx)("div",{className:"mt-auto pt-5",children:(0,i.jsx)(ec.v,{isPublic:null!==(t=s.public)&&void 0!==t&&t,organisation:!0===s.published?s.organisation:void 0,user:s.user})})]}),(0,i.jsxs)("div",{className:x()("col-span-3 flex grow flex-col gap-5 overflow-hidden"),children:[(0,i.jsx)(eu,{columns:null!==(a=s.parameters)&&void 0!==a?a:[]}),(0,i.jsxs)("div",{className:"flex shrink-0 justify-between gap-4",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsxs)("button",{className:"btn btn-solid btn-sm",onClick:()=>{l(s.id)},children:[n("feat-card.use-template","Use template"),(0,i.jsx)(ei.Z,{className:"h-3 w-3"})]})})]})]})]})]})};function ev(e){let{template:t,onUseTemplate:a,viewType:s="featured",onPreviewTemplate:l,userId:r}=e;return(0,i.jsx)(eo,{layoutId:t.id,onUse:()=>{a(t.id)},onPreview:()=>{null==l||l(t.id)},viewType:s,children:(0,i.jsx)(ej,{template:t,userId:r})})}function ej(e){let{template:t,userId:a}=e,{t:s}=(0,j.qM)(j.aD.TABULAR_REVIEW_TEMPLATES),{tag:l,title:r,description:n,parametersCount:d,public:c,user:o}=t,m=t.created_by===a,u={size:"1"};return(0,i.jsxs)("div",{className:"flex h-full flex-col",children:[(0,i.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,i.jsx)(ed.t,{className:"h-4 w-4 text-[#C0C0C3]"}),!!l&&(0,i.jsx)("p",{className:"truncate rounded bg-[#EFF4FF] px-1 py-0.5 text-xs text-[#4478FF] dark:bg-slate-3",children:l})]}),(0,i.jsxs)("div",{className:"mb-2 flex-1",children:[(0,i.jsx)("h4",{className:"mb-1 line-clamp-2 text-lg leading-[22px] text-slate-11 dark:text-white",children:r}),(0,i.jsx)("p",{className:x()("max-h-16 overflow-hidden text-ellipsis text-xs text-slate-400 dark:text-slate-11",null!=d?"line-clamp-2":"line-clamp-4"),children:n})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{className:"text-xs",children:"".concat(d," ").concat(s("columns","columns"))}),(0,S.EQ)([null!=c&&c,m]).with([!0,S.P._],()=>(0,i.jsx)(O.qE,{...u,src:"/logo/Leya-Symbol.svg"})).with([!1,!0],()=>{var e;return(0,i.jsx)(O.Yt,{...u,userId:null!==(e=null==o?void 0:o.id)&&void 0!==e?e:"",name:null==o?void 0:o.givenName})}).with([!1,!1],()=>(0,i.jsx)(O.yN,{...u})).exhaustive()]})]})}var eg=a(96594),eb=a.n(eg);let ef=e=>{var t,a,s,l;let{t:i}=(0,j.qM)(j.aD.TABULAR_REVIEW_TEMPLATES),{data:r}=(0,M.jdP)({limit:2}),{data:n,isLoading:d}=(0,M.y7H)({limit:2,user_id:null!=e?e:""}),{data:c}=(0,M.OCt)({limit:5}),{data:o}=(0,M.ezI)({limit:10}),m=null!==(t=null==r?void 0:r.templates.map(e=>{var t;return{...e,title:e.name,parametersCount:e.parameters_count,parameters:null!==(t=e.parameters)&&void 0!==t?t:[],type:"tabular_review",tag:i("tag.new","New")}}))&&void 0!==t?t:[],x=null!==(a=null==n?void 0:n.templates.map(e=>{var t;return{...e,title:e.name,parametersCount:e.parameters_count,parameters:null!==(t=e.parameters)&&void 0!==t?t:[],type:"tabular_review",tag:i("tag.recently-used","Recently used")}}))&&void 0!==a?a:[],u=null!==(s=null==c?void 0:c.templates.map(e=>{var t;return{...e,title:e.name,parametersCount:e.parameters_count,parameters:null!==(t=e.parameters)&&void 0!==t?t:[],type:"tabular_review",tag:i("tag.popular","Popular")}}))&&void 0!==s?s:[],p=null!==(l=null==o?void 0:o.templates.map(e=>{var t;let a=e.parameters;return{...e,title:i("name.".concat(e.id),e.name),description:i("description.".concat(e.id),e.description),parametersCount:e.parameters_count,parameters:null!==(t=null==a?void 0:a.map(e=>({...e,name:i("name.".concat(e.id),e.name),description:i("description.".concat(e.id),e.description)})))&&void 0!==t?t:[],type:"tabular_review"}}))&&void 0!==l?l:[];return{templates:eb()([...m,...x,...u,...p],"id"),isLoading:d}};function eN(){let{t:e}=(0,j.qM)(j.aD.COMMON),{user:t}=(0,T.aF)(),a=(0,B.t)(),{templates:s,isLoading:l}=ef(null==t?void 0:t.id),[r,n]=(0,p.useState)(null),[d,c]=(0,p.useState)(!1),[m,u]=(0,p.useState)(ee.d.All),h=(0,p.useMemo)(()=>s.slice(0,10),[s]),[v,b]=(0,p.useState)(!1),{createReview:f}=(0,et.g)(),N=async e=>{let t=await f({fromReviewId:(0,D.Vj)(),fromTemplateId:e}),s=h.find(t=>t.id===e);g.c.capture("homepage:tabular_review_template_use",{tabular_review_id:t,template_id:e,columns_count:null==s?void 0:s.parametersCount,source:"homepage"}),a.push("/tabular-reviews/".concat(t),"use_template")},w=async()=>{g.c.capture("homepage:tabular_review_create",{source:"homepage"}),a.push("/tabular-reviews/".concat((0,D.Vj)()),"template_create")},y=s.find(e=>e.id===r);return(0,i.jsx)("div",{className:"pl-6 pt-5",onMouseEnter:()=>{b(!0)},onMouseLeave:()=>{b(!1)},children:(0,i.jsxs)("div",{className:"rounded-xl",children:[(0,i.jsx)(es,{setTemplateDialogOpen:c,setOpenEntry:u,templateDialogOpen:d,openEntry:m,handleUseTemplate:e=>void N(e)}),(0,i.jsxs)(o.fC,{className:"pb-5",style:{maxWidth:"100%"},children:[(0,i.jsx)(o.l_,{children:(0,i.jsx)("div",{className:"flex gap-6 pr-6",children:l?(0,i.jsx)(el,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{onClick:()=>void w(),className:"flex h-[187px] w-[240px] shrink-0 select-none flex-col items-center justify-center gap-2 rounded-2xl border border-slate-4 bg-white p-6 transition-all hover:bg-slate-3 dark:bg-slate-1 dark:hover:bg-slate-4",children:[(0,i.jsx)("p",{className:"text-center font-title text-base",children:e("featured-view.create-new-tabular-review","Create new tabular review")}),(0,i.jsx)(K.M,{className:"h-6 w-6 stroke-[1.6px] text-slate-12"})]}),h.map(e=>(0,i.jsx)(ev,{template:e,onUseTemplate:e=>{N(e)},onPreviewTemplate:e=>{n(e)},userId:null==t?void 0:t.id},e.id))]})})}),(0,i.jsx)(o.LW,{orientation:"horizontal",className:x()("mr-6 h-2 rounded-xl bg-slate-3 transition-opacity duration-100",v?"opacity-1":"opacity-0"),children:(0,i.jsx)(o.bU,{className:"rounded-xl bg-slate-8",style:{height:"8px"}})})]}),null!==r&&void 0!==y&&(0,i.jsx)(ep,{template:y,onUseTemplate:e=>{N(e)},onClose:()=>{n(null)},onPreviewTemplate:e=>{n(e)}})]})})}function ew(e){let{instructions:t}=e,{isFlagEnabled:a,isFlagReady:s}=(0,r.y)(r.T.NewHomePage);return a&&s?(0,i.jsxs)("div",{className:"no-scrollbar h-full w-full overflow-y-scroll bg-slate-1 dark:bg-slate-2",children:[(0,i.jsx)(J,{}),(0,i.jsx)(b,{instructions:t}),(0,i.jsx)(eN,{}),(0,i.jsx)(Q,{}),(0,i.jsx)(V,{})]}):null}}}]);